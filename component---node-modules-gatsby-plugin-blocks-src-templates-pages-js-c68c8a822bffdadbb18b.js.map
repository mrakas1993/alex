{"version":3,"sources":["webpack:///./node_modules/gatsby-plugin-blocks/src/templates/pages.js"],"names":["useState","pages","setPages","newPage","setNewPage","useEffect","fetch","res","json","allPages","initializePages","handleSubmit","e","preventDefault","page","endsWith","method","headers","body","JSON","stringify","code","navigate","onSubmit","onChange","target","value","type","sx","mt","map","key","href"],"mappings":"84CAmBe,qBAAO,IAAD,IACOA,mBAAS,MADhB,GACZC,EADY,KACLC,EADK,SAEWF,mBAAS,IAFpB,GAEZG,EAFY,KAEHC,EAFG,KAcnB,GAVAC,qBAAU,YACa,4CAAG,qHACJC,MAAM,oBADF,cAChBC,EADgB,gBAECA,EAAIC,OAFL,OAEhBC,EAFgB,OAGtBP,EAASO,GAHa,2CAAH,qDAMrBC,KACC,KAEET,EACH,OAAO,KAGT,IAAMU,EAAY,4CAAG,WAAMC,GAAN,yFACnBA,EAAEC,iBAEGV,EAHc,wDAObW,EAAOX,EAAQY,SAAS,OAASZ,EAAUA,EAAU,MAPxC,SASbG,MAAM,aAAc,CACxBU,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBC,KA/Cc,qUAgDdP,WAhBe,OAoBnBQ,mBAAS,wBAAD,OAAyBR,IApBd,2CAAH,sDAuBlB,OACE,wBACE,oBAAMS,SAAUZ,GACd,qCACW,uBACT,qBAAOa,SAAU,SAAAZ,GAAC,OAAIR,EAAWQ,EAAEa,OAAOC,UAC1C,qBAAOC,KAAK,SAASD,MAAM,sBAG/B,kBAAIE,GAAI,CAAEC,GAAI,CAAC,EAAG,EAAG,KAClB5B,EAAM6B,KAAI,SAAAhB,GAAI,OACb,kBAAIiB,IAAKjB,GACP,iBAAGkB,KAAI,+BAA0BlB,IAASA","file":"component---node-modules-gatsby-plugin-blocks-src-templates-pages-js-c68c8a822bffdadbb18b.js","sourcesContent":["/** @jsx jsx */\nimport { jsx } from 'theme-ui'\nimport { useEffect, useState } from 'react'\nimport { navigate } from 'gatsby'\n\nconst DEFAULT_PAGE_JSX = `\nimport React from \"react\";\nimport { Blocks, QuoteBasic } from \"@blocks/react\";\n\nexport default () => (\n  <Blocks.Root>\n    <QuoteBasic>\n      <QuoteBasic.Content>Science is magic that works.</QuoteBasic.Content>\n      <QuoteBasic.Author>Kurt Vonnegut</QuoteBasic.Author>\n    </QuoteBasic>\n  </Blocks.Root>\n);\n`\n\nexport default () => {\n  const [pages, setPages] = useState(null)\n  const [newPage, setNewPage] = useState('')\n\n  useEffect(() => {\n    const initializePages = async () => {\n      const res = await fetch('/___blocks/pages')\n      const allPages = await res.json()\n      setPages(allPages)\n    }\n\n    initializePages()\n  }, [])\n\n  if (!pages) {\n    return null\n  }\n\n  const handleSubmit = async e => {\n    e.preventDefault()\n\n    if (!newPage) {\n      return\n    }\n\n    const page = newPage.endsWith('.js') ? newPage : newPage + '.js'\n\n    await fetch('/___blocks', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        code: DEFAULT_PAGE_JSX,\n        page\n      })\n    })\n\n    navigate(`/___blocks/edit?page=${page}`)\n  }\n\n  return (\n    <main>\n      <form onSubmit={handleSubmit}>\n        <label>\n          New page <br />\n          <input onChange={e => setNewPage(e.target.value)} />\n          <input type=\"submit\" value=\"Create new page\" />\n        </label>\n      </form>\n      <ul sx={{ mt: [3, 4, 5] }}>\n        {pages.map(page => (\n          <li key={page}>\n            <a href={`/___blocks/edit?page=${page}`}>{page}</a>\n          </li>\n        ))}\n      </ul>\n    </main>\n  )\n}\n"],"sourceRoot":""}